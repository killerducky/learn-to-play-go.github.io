(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{155:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={flatten:function(t){return t.reduce((function(a,b){return a.concat(b)}))},flatMap:function(t,e){return Array.prototype.concat.apply([],t.map(e))},cartesianProduct:function(t,e){return this.flatten(t.map((function(t){return e.map((function(e){return[t,e]}))})))},randomID:function(t){return t+"-"+[0,1,2,3].map((function(){return Math.floor(65536*Math.random()).toString(16).substring(1)})).join("")},clone:function(element){return element.cloneNode(!0)},createElement:function(t,e){var element=document.createElement(t);return void 0!==e&&e.class&&(element.className=e.class),element},createSVGElement:function(t,e){var n=this,element=document.createElementNS("http://www.w3.org/2000/svg",t);return void 0!==e&&(e.class&&e.class.split(" ").forEach((function(t){n.addClass(element,t)})),e.attributes&&Object.keys(e.attributes).forEach((function(t){element.setAttribute(t,e.attributes[t])})),e.text&&(element.textContent=e.text.toString())),element},appendElement:function(t,e){t.insertBefore(e,null)},addEventListener:function(t,e,n){t.addEventListener(e,n,!1)},removeClass:function(t,e){if(this.hasClass(t,e))if(t.classList&&t.classList.remove)t.classList.remove(e);else{var n=RegExp("\\b"+e+"\\b","g");t instanceof SVGElement?t.setAttribute("class",t.getAttribute("class").replace(n,"")):t.className=t.getAttribute("class").replace(n,"")}},addClass:function(t,e){t.classList&&t.classList.add?t.classList.add(e):t instanceof SVGElement?t.setAttribute("class",t.getAttribute("class")+" "+e):t.className=t.getAttribute("class")+" "+e},hasClass:function(t,e){if(t.classList&&t.classList.contains)return t.classList.contains(e);var n=RegExp("\\b"+e+"\\b","g");return t instanceof SVGElement?n.test(t.getAttribute("class")):n.test(t.className)},toggleClass:function(t,e){t.classList&&t.classList.toggle?t.classList.toggle(e):this.hasClass(t,e)?this.removeClass(t,e):this.addClass(t,e)},unique:function(t){var e=[];return t.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e}}},164:function(t,e,n){e.Game=n(165).default,e.Client=n(180).default,e.utils=n(155).default},165:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var e=[],n=!0,r=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(n=(l=c.next()).done)&&(e.push(l.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}return e}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=v(n(171)),c=v(n(172)),h=v(n(173)),d=v(n(174)),f=v(n(176)),m=v(n(177));function v(t){return t&&t.__esModule?t:{default:t}}var y=["element","boardSize","scoring","handicapStones","koRule","komi","_hooks","fuzzyStonePlacement","renderer","freeHandicapPlacement"],E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._validateOptions(t),this._defaultBoardSize=19,this.boardSize=null,this._moves=[],this.callbacks={postRender:function(){},postMove:function(){}},this._boardElement=t.element,this._defaultScoring="territory",this._defaultKoRule="simple",this._defaultRenderer="svg",this._deadPoints=[],this._setup(t)};E.prototype={_validateOptions:function(t){for(var e in t)if(t.hasOwnProperty(e)){if(y.indexOf(e)<0)throw new Error("Unrecognized game option: "+e);if(void 0===t[e]||null===t[e])throw new Error("Game option "+e+" must not be set as null or undefined")}},_configureOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.boardSize,n=void 0===e?this._defaultBoardSize:e,r=t.komi,h=void 0===r?0:r,v=t.handicapStones,y=void 0===v?0:v,E=t.freeHandicapPlacement,S=void 0!==E&&E,_=t.scoring,w=void 0===_?this._defaultScoring:_,A=t.koRule,P=void 0===A?this._defaultKoRule:A,I=t.renderer,C=void 0===I?this._defaultRenderer:I;if("number"!=typeof n)throw new Error("Board size must be a number, but was: "+(void 0===n?"undefined":o(n)));if("number"!=typeof y)throw new Error("Handicap stones must be a number, but was: "+(void 0===n?"undefined":o(n)));if(y>0&&9!==n&&13!==n&&19!==n)throw new Error("Handicap stones not supported on sizes other than 9x9, 13x13 and 19x19");if(y<0||1===y||y>9)throw new Error("Only 2 to 9 handicap stones are supported");if(n>19)throw new Error("cannot generate a board size greater than 19");if(this.boardSize=n,this.handicapStones=y,this._freeHandicapPlacement=S,this._scorer=new m.default({scoreBy:w,komi:h}),this._rendererChoice={dom:l.default,svg:c.default}[C],!this._rendererChoice)throw new Error("Unknown renderer: "+C);this._ruleset=new f.default({koRule:P}),this._freeHandicapPlacement?this._initialState=d.default._initialFor(n,0):this._initialState=d.default._initialFor(n,y)},_stillPlayingHandicapStones:function(){return this._freeHandicapPlacement&&this.handicapStones>0&&this._moves.length<this.handicapStones},_setup:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._validateOptions(e),this._configureOptions(e),this._boardElement){var n={handleClick:function(e,n){t.isOver()?t.toggleDeadAt(e,n):t.playAt(e,n)},hoverValue:function(e,n){if(!t.isOver()&&!t.isIllegalAt(e,n))return t.currentPlayer()},gameIsOver:function(){return t.isOver()}};this.renderer=new this._rendererChoice(this._boardElement,{hooks:e._hooks||n,options:{fuzzyStonePlacement:e.fuzzyStonePlacement}})}else this.renderer=new h.default;this.render()},intersectionAt:function(t,e){return this.currentState().intersectionAt(t,e)},intersections:function(){return this.currentState().intersections},deadStones:function(){return this._deadPoints},coordinatesFor:function(t,e){return this.currentState().xCoordinateFor(e)+this.currentState().yCoordinateFor(t)},currentPlayer:function(){return this._stillPlayingHandicapStones()?"black":this.currentState().nextColor()},isWhitePlaying:function(){return"white"===this.currentPlayer()},isBlackPlaying:function(){return"black"===this.currentPlayer()},score:function(){return this._scorer.score(this)},currentState:function(){return this._moves[this._moves.length-1]||this._initialState},moveNumber:function(){return this.currentState().moveNumber},labelsAt:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",i=0;i<t.length;++i){var n=this.currentState().labelAt(t[i].x,t[i].y,t[i].label);this._moves.push(n)}return this._moves.push(this.currentState().setColor(e)),this.render(),!0},stonesAt:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",i=0;i<t.length;++i){var n=this.currentState().playAt(t[i].x,t[i].y,t[i].color,!0);this._moves.push(n)}return this._moves.push(this.currentState().setColor(e)),this.render(),!0},playAt:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.render,o=void 0===r||r,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.isIllegalAt(t,e))return!1;var c=l||this.currentPlayer(),h=this.currentState().playAt(t,e,c),d=h,f=d.koPoint;return f&&!this._ruleset._isKoViolation(f.y,f.x,h,this._moves.concat(h))&&(h=h.copyWithAttributes({koPoint:null})),this._moves.push(h),this.callbacks.postMove(this,c,!1),o&&this.render(),!0},pass:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.render,n=void 0===e||e;if(this.isOver())return!1;var r=this.currentPlayer(),o=this.currentState().playPass(r);return this._moves.push(o),this.callbacks.postMove(this,r,!0),n&&this.render(),!0},isOver:function(){if(this._moves.length<2)return!1;var t=this._moves[this._moves.length-1],e=this._moves[this._moves.length-2];return t.pass&&e.pass},markDeadAt:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.render,o=void 0===r||r;return!!this._isDeadAt(t,e)||this._setDeadStatus(t,e,!0,{render:o})},unmarkDeadAt:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.render,o=void 0===r||r;return!this._isDeadAt(t,e)||this._setDeadStatus(t,e,!1,{render:o})},toggleDeadAt:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.render,o=void 0===r||r;return this._setDeadStatus(t,e,!this._isDeadAt(t,e),{render:o})},_setDeadStatus:function(t,e,n){var o=this,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=l.render,h=void 0===c||c,d=this.intersectionAt(t,e);if(!d.isEmpty()){var f=[],m=this.currentState().partitionTraverse(d,(function(t){return t.isEmpty()||t.sameColorAs(d)})),v=r(m,1),y=v[0];return y.forEach((function(t){t.isEmpty()||f.push(t)})),f.forEach((function(t){n?o._deadPoints.push({y:t.y,x:t.x}):o._deadPoints=o._deadPoints.filter((function(e){return!(e.y===t.y&&e.x===t.x)}))})),h&&this.render(),!0}},_isDeadAt:function(t,e){return this._deadPoints.some((function(n){return n.y===t&&n.x===e}))},isIllegalAt:function(t,e){return this._ruleset.isIllegal(t,e,this)},territory:function(){return this.isOver()?this._scorer.territory(this):{black:[],white:[]}},undo:function(){this._moves.pop(),this.render()},clear:function(){this._moves=[],this.render()},render:function(){this.isOver()||(this._deadPoints=[]),this.renderer.render(this.currentState(),{territory:this.territory(),deadStones:this.deadStones()}),this.callbacks.postRender(this)}},e.default=E},166:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var e=[],n=!0,r=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(n=(l=c.next()).done)&&(e.push(l.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}return e}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=n(155),c=(r=l)&&r.__esModule?r:{default:r};var h=function(t,e){var n=e.hooks,r=e.options;this.INTERSECTION_GAP_SIZE=28,this.GUTTER_MARGIN=this.INTERSECTION_GAP_SIZE-3,this.BASE_MARGIN=this.INTERSECTION_GAP_SIZE-10,this.hasCoordinates=t.hasAttribute("data-include-coordinates"),this.MARGIN=this.hasCoordinates?this.BASE_MARGIN+this.GUTTER_MARGIN:this.BASE_MARGIN,this.boardElement=t,this.grid=[],this.hooks=n||{},this._options=r||{},this._initialized=!1,this._options.fuzzyStonePlacement&&(c.default.addClass(t,"tenuki-fuzzy-placement"),c.default.removeClass(t,"tenuki-board-flat"),c.default.addClass(t,"tenuki-board-nonflat"),this.smallerStones=!0),this.flatStones=c.default.hasClass(t,"tenuki-board-flat"),this.flatStones||c.default.addClass(t,"tenuki-board-nonflat")};h.hoshiPositionsFor=function(t){var e=[];if(t<7){if(t>1&&t%2==1){var n={};n.top=(t-1)/2,n.left=n.top,e.push(n)}}else for(var r=t>11?3:2,o=0;o<3;o++)for(var l=0;l<3;l++)if(7!==t&&t%2!=0||1!==o&&1!==l){var c={};0===o&&(c.top=r),1===o&&(c.top=(t+1)/2-1),2===o&&(c.top=t-r-1),0===l&&(c.left=r),1===l&&(c.left=(t+1)/2-1),2===l&&(c.left=t-r-1),e.push(c)}return e},h.prototype={_setup:function(t){var e=this,n=this.boardElement;e.BOARD_LENGTH=2*this.MARGIN+(t.boardSize-1)*(this.INTERSECTION_GAP_SIZE+1);var r=c.default.createElement("div",{class:"tenuki-inner-container"});e.innerContainer=r,c.default.appendElement(n,r);var o=c.default.createElement("div",{class:"tenuki-zoom-container"});e.zoomContainer=o,c.default.appendElement(r,o),e.cancelZoomElement=c.default.createElement("div",{class:"cancel-zoom"});var l=c.default.createElement("div",{class:"cancel-zoom-backdrop"});c.default.addEventListener(e.cancelZoomElement,"click",(function(t){return t.preventDefault(),e.zoomOut(),!1})),c.default.addEventListener(l,"click",(function(t){return t.preventDefault(),e.zoomOut(),!1})),c.default.appendElement(r,e.cancelZoomElement),c.default.appendElement(r,l);var h,d,f;h="resize",d="optimizedResize",f=!1,window.addEventListener(h,(function(){f||(f=!0,window.requestAnimationFrame((function(){window.dispatchEvent(new CustomEvent(d)),f=!1})))}));var m=this.generateBoard(t,{hasCoordinates:this.hasCoordinates,smallerStones:this.smallerStones,flatStones:this.flatStones});c.default.appendElement(o,m),window.requestAnimationFrame((function(){o.style.willChange="transform",e.computeSizing()})),window.addEventListener("optimizedResize",(function(){e.computeSizing()})),e.touchmoveChangedTouch=null,e.touchstartEventHandler=e.handleTouchStart.bind(e),e.touchmoveEventHandler=e.handleTouchMove.bind(e),e.touchendEventHandler=e.handleTouchEnd.bind(e),c.default.addEventListener(e.innerContainer,"touchstart",e.touchstartEventHandler),c.default.addEventListener(e.innerContainer,"touchend",e.touchendEventHandler),c.default.addEventListener(e.innerContainer,"touchmove",e.touchmoveEventHandler)},computeSizing:function(){var t=this.innerContainer,e=this.zoomContainer,n=this.boardElement;t.style.height="",t.style.width="",e.style.height="",e.style.width="",t.style.transform="",n.style.width="",n.style.height="",this._touchEventFired=null,t.style.width=this.BOARD_LENGTH+"px",t.style.height=this.BOARD_LENGTH+"px",e.style.width=this.BOARD_LENGTH+"px",e.style.height=this.BOARD_LENGTH+"px";var r=t.parentNode.clientWidth/t.clientWidth,o=t.parentNode.clientHeight/t.clientHeight,l=Math.min(r,o);l>0&&(l<1?c.default.addClass(n,"tenuki-scaled"):c.default.removeClass(n,"tenuki-scaled"),(l<1||l>1)&&(t.style["transform-origin"]="top left",t.style.transform="scale3d("+l+", "+l+", 1)")),n.style.width=t.getBoundingClientRect().width+"px",n.style.height=t.getBoundingClientRect().height+"px",e.style.willChange="",window.requestAnimationFrame((function(){e.style.willChange="transform"}))},addIntersectionEventListeners:function(element,t,e){var n=this;c.default.addEventListener(element,"mouseenter",(function(){var r=t,o=e,l=n.hooks.hoverValue(r,o);l&&(c.default.addClass(element,"hovered"),c.default.addClass(element,l))})),c.default.addEventListener(element,"mouseleave",(function(){c.default.hasClass(this,"hovered")&&(c.default.removeClass(element,"hovered"),c.default.removeClass(element,"black"),c.default.removeClass(element,"white")),n.resetTouchedPoint()})),c.default.addEventListener(element,"click",(function(){var r=t,o=e;!n._touchEventFired||document.body.clientWidth/window.innerWidth>1||n.hooks.gameIsOver()?n.hooks.handleClick(r,o):n.touchedPoint&&element===n.touchedPoint?n.hooks.handleClick(r,o):n.showPossibleMoveAt(element,r,o)}))},handleTouchStart:function(t){if(this._touchEventFired=!0,t.touches.length>1)this.zoomedIn&&t.preventDefault();else if(this.zoomedIn){var e=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY;this.dragStartX=e,this.dragStartY=n,this.zoomContainer.style.transition="none",this.animationFrameRequestID=window.requestAnimationFrame(this.processDragDelta.bind(this))}},handleTouchMove:function(t){if(!(t.touches.length>1)){if(!this.zoomedIn)return!0;t.preventDefault(),this.touchmoveChangedTouch=t.changedTouches[0],this.moveInProgress=!0}},handleTouchEnd:function(t){t.touches.length>1||this.zoomedIn&&(this.zoomContainer.style.transition="",this.moveInProgress&&(this.translateY=this.lastTranslateY,this.translateX=this.lastTranslateX,this.moveInProgress=!1,this.touchmoveChangedTouch=null,window.cancelAnimationFrame(this.animationFrameRequestID)))},processDragDelta:function(){if(this.touchmoveChangedTouch){var t=this.innerContainer,e=this.touchmoveChangedTouch.clientX,n=this.touchmoveChangedTouch.clientY,r=e-this.dragStartX,o=n-this.dragStartY,l=this.translateY+o/2.5,c=this.translateX+r/2.5;l>.5*t.clientHeight-this.MARGIN&&(l=.5*t.clientHeight-this.MARGIN),c>.5*t.clientWidth-this.MARGIN&&(c=.5*t.clientWidth-this.MARGIN),l<-.5*t.clientHeight+this.MARGIN&&(l=-.5*t.clientHeight+this.MARGIN),c<-.5*t.clientWidth+this.MARGIN&&(c=-.5*t.clientWidth+this.MARGIN),this.zoomContainer.style.transform="translate3d("+2.5*c+"px, "+2.5*l+"px, 0) scale3d(2.5, 2.5, 1)",this.lastTranslateX=c,this.lastTranslateY=l,this.animationFrameRequestID=window.requestAnimationFrame(this.processDragDelta.bind(this))}else this.animationFrameRequestID=window.requestAnimationFrame(this.processDragDelta.bind(this))},showPossibleMoveAt:function(t,e,n){var r=this.boardElement,o=this.zoomContainer;if(this.zoomContainerHeight=this.zoomContainerHeight||o.clientHeight,this.zoomContainerWidth=this.zoomContainerWidth||o.clientWidth,this.touchedPoint=t,c.default.hasClass(r,"tenuki-scaled")){var l=e*(this.INTERSECTION_GAP_SIZE+1),h=n*(this.INTERSECTION_GAP_SIZE+1),d=.5*this.zoomContainerHeight-l-this.MARGIN,f=.5*this.zoomContainerWidth-h-this.MARGIN;o.style.transform="translate3d("+2.5*f+"px, "+2.5*d+"px, 0) scale3d(2.5, 2.5, 1)",this.translateY=d,this.translateX=f,c.default.addClass(this.cancelZoomElement,"visible"),this.zoomedIn=!0}},resetTouchedPoint:function(){this.touchedPoint=null},zoomOut:function(){this.resetTouchedPoint(),this.zoomContainer.style.transform="",this.zoomContainer.style.transition="",this.dragStartX=null,this.dragStartY=null,this.translateY=null,this.translateX=null,this.lastTranslateX=null,this.lastTranslateY=null,c.default.removeClass(this.cancelZoomElement,"visible"),this.zoomedIn=!1},render:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.territory,l=n.deadStones;this._initialized||(this._setup(t),this._initialized=!0),this.resetTouchedPoint(),this.renderStonesPlayed(t.intersections);var h=t.hidePlayedPoint?null:t.playedPoint;if(this.updateMarkerPoints({playedPoint:h,koPoint:t.koPoint,labelPoint:t.labelPoint,labelType:t.labelType}),this._options.fuzzyStonePlacement&&h){var d=["v-shift-up","v-shift-upup","v-shift-down","v-shift-downdown","v-shift-none"],f=["h-shift-left","h-shift-leftleft","h-shift-right","h-shift-rightright","h-shift-none"],m=d.concat(f),v=m.some((function(t){return c.default.hasClass(e.grid[h.y][h.x],t)}));if(!v){var y=c.default.cartesianProduct(d,f),E=o(y[Math.floor(Math.random()*y.length)],2),S=E[0],_=E[1];[[-1,0],[0,-1],[0,1],[1,0]].forEach((function(t){var n=o(t,2),r=n[0],l=n[1];if(e.grid[h.y+r]&&e.grid[h.y+r][h.x+l]){var d=e.grid[h.y+r][h.x+l];c.default.hasClass(d,"empty")||[[-1,0,"v-shift-downdown","v-shift-up","v-shift-down"],[-1,0,"v-shift-downdown","v-shift-upup","v-shift-none"],[-1,0,"v-shift-down","v-shift-upup","v-shift-none"],[1,0,"v-shift-upup","v-shift-down","v-shift-up"],[1,0,"v-shift-upup","v-shift-downdown","v-shift-none"],[1,0,"v-shift-up","v-shift-downdown","v-shift-none"],[0,-1,"h-shift-rightright","h-shift-left","h-shift-right"],[0,-1,"h-shift-rightright","h-shift-leftleft","h-shift-none"],[0,-1,"h-shift-right","h-shift-leftleft","h-shift-none"],[0,1,"h-shift-leftleft","h-shift-right","h-shift-left"],[0,1,"h-shift-leftleft","h-shift-rightright","h-shift-none"],[0,1,"h-shift-left","h-shift-rightright","h-shift-none"]].forEach((function(t){var e=o(t,5),n=e[0],h=e[1],f=e[2],m=e[3],v=e[4];r!==n||l!==h||!c.default.hasClass(d,f)||S!==m&&_!==m||(c.default.removeClass(d,f),c.default.addClass(d,v))}))}})),c.default.addClass(this.grid[h.y][h.x],S),c.default.addClass(this.grid[h.y][h.x],_)}}(l.length>0||r.black.length>0||r.white.length>0)&&this.renderTerritory(r,l)},renderStonesPlayed:function(t){var e=this;t.forEach((function(t){e.renderIntersection(t)}))},updateMarkerPoints:function(t){var e=t.playedPoint,n=t.koPoint,r=t.labelPoint,o=t.labelType;n&&c.default.addClass(this.grid[n.y][n.x],"ko"),e&&c.default.addClass(this.grid[e.y][e.x],"played"),r&&c.default.addClass(this.grid[r.y][r.x],o)},renderIntersection:function(t){var e=this.grid[t.y][t.x],n=["intersection"];if(t.hasLabel()&&n.push(t.getLabel()),t.isEmpty())n.push("empty");else{n.push("occupied"),t.isBlack()?n.push("black"):n.push("white");["v-shift-up","v-shift-upup","v-shift-down","v-shift-downdown","v-shift-none","h-shift-left","h-shift-leftleft","h-shift-right","h-shift-rightright","h-shift-none"].forEach((function(t){c.default.hasClass(e,t)&&n.push(t)}))}this.setIntersectionClasses(e,t,n)},renderTerritory:function(t,e){var n=this;c.default.flatten(this.grid).forEach((function(element){c.default.removeClass(element,"territory-black"),c.default.removeClass(element,"territory-white"),c.default.removeClass(element,"dead")})),e.forEach((function(t){c.default.addClass(n.grid[t.y][t.x],"dead")})),t.black.forEach((function(t){c.default.addClass(n.grid[t.y][t.x],"territory-black")})),t.white.forEach((function(t){c.default.addClass(n.grid[t.y][t.x],"territory-white")}))}},e.default=h},167:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e,n,label){this.y=t,this.x=e,this.value=n||"empty",this.label=label||"empty",Object.freeze(this)};r.prototype={isOccupiedWith:function(t){return!this.isEmpty()&&this.value===t},hasLabel:function(){return this.label&&"empty"!==this.label},getLabel:function(){return this.label},isBlack:function(){return"black"===this.value},isWhite:function(){return"white"===this.value},isEmpty:function(){return"empty"===this.value},sameColorAs:function(t){return this.value===t.value}},e.default=r},168:function(t,e,n){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return o}))},169:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},171:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n(155)),o=l(n(166));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t,e){var n=e.hooks,l=e.options;o.default.call(this,t,{hooks:n,options:l}),this.smallerStones&&r.default.addClass(t,"tenuki-smaller-stones"),r.default.addClass(t,"tenuki-dom-renderer")};(c.prototype=Object.create(o.default.prototype)).constructor=c,c.prototype._setup=function(t){o.default.prototype._setup.call(this,t),this.BOARD_LENGTH+=1,this.computeSizing()},c.prototype.generateBoard=function(t){var e=this,n=r.default.createElement("div");r.default.appendElement(n,r.default.createElement("div",{class:"lines horizontal"})),r.default.appendElement(n,r.default.createElement("div",{class:"lines vertical"})),r.default.appendElement(n,r.default.createElement("div",{class:"hoshi-points"})),r.default.appendElement(n,r.default.createElement("div",{class:"intersections"})),o.default.hoshiPositionsFor(t.boardSize).forEach((function(t){var o=r.default.createElement("div",{class:"hoshi"});o.style.left=t.left*(e.INTERSECTION_GAP_SIZE+1)+"px",o.style.top=t.top*(e.INTERSECTION_GAP_SIZE+1)+"px",r.default.appendElement(n.querySelector(".hoshi-points"),o)}));for(var l=0;l<t.boardSize;l++){var c=r.default.createElement("div",{class:"line horizontal"});c.setAttribute("data-left-gutter",t.yCoordinateFor(l)),r.default.appendElement(n.querySelector(".lines.horizontal"),c);var h=r.default.createElement("div",{class:"line vertical"});h.setAttribute("data-top-gutter",t.xCoordinateFor(l)),r.default.appendElement(n.querySelector(".lines.vertical"),h);for(var d=0;d<t.boardSize;d++){var f=r.default.createElement("div",{class:"intersection empty"}),m=r.default.createElement("div",{class:"stone"});r.default.appendElement(f,m),f.setAttribute("data-position-x",d),f.setAttribute("data-position-y",l),f.style.left=d*(this.INTERSECTION_GAP_SIZE+1)+"px",f.style.top=l*(this.INTERSECTION_GAP_SIZE+1)+"px",r.default.appendElement(n.querySelector(".intersections"),f),this.grid[l]=this.grid[l]||[],this.grid[l][d]=f,this.addIntersectionEventListeners(f,l,d)}}return r.default.addEventListener(n.querySelector(".lines.horizontal"),"mousedown",(function(t){t.preventDefault()})),r.default.addEventListener(n.querySelector(".lines.vertical"),"mousedown",(function(t){t.preventDefault()})),n.querySelector(".lines.horizontal").style.width=this.INTERSECTION_GAP_SIZE*(t.boardSize-1)+t.boardSize+"px",n.querySelector(".lines.horizontal").style.height=this.INTERSECTION_GAP_SIZE*(t.boardSize-1)+t.boardSize+"px",n.querySelector(".lines.vertical").style.width=this.INTERSECTION_GAP_SIZE*(t.boardSize-1)+t.boardSize+"px",n.querySelector(".lines.vertical").style.height=this.INTERSECTION_GAP_SIZE*(t.boardSize-1)+t.boardSize+"px",n},c.prototype.setIntersectionClasses=function(t,e,n){t.className!==n.join(" ")&&(t.className=n.join(" "))},e.default=c},172:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n(155)),o=l(n(166));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t,e){var n=e.hooks,l=e.options;o.default.call(this,t,{hooks:n,options:l}),r.default.addClass(t,"tenuki-svg-renderer")};(c.prototype=Object.create(o.default.prototype)).constructor=c;var h={};c.prototype.generateBoard=function(t,e){var n=e.hasCoordinates,l=e.smallerStones,c=e.flatStones;this.blackGradientID=r.default.randomID("black-gradient"),this.whiteGradientID=r.default.randomID("white-gradient");var svg=function(t,e,n){var l=n.hasCoordinates,c=n.smallerStones,d=n.flatStones,f=[e.boardSize,l,c,d].toString(),svg=r.default.createSVGElement("svg"),defs=r.default.createSVGElement("defs");r.default.appendElement(svg,defs);var m=r.default.createSVGElement("radialGradient",{attributes:{id:t.blackGradientID,cy:"15%",r:"50%"}});r.default.appendElement(m,r.default.createSVGElement("stop",{attributes:{offset:"0%","stop-color":"hsl(0, 0%, 38%)"}})),r.default.appendElement(m,r.default.createSVGElement("stop",{attributes:{offset:"100%","stop-color":"#39363D"}})),r.default.appendElement(defs,m);var v=r.default.createSVGElement("radialGradient",{attributes:{id:t.whiteGradientID,cy:"15%",r:"50%"}});r.default.appendElement(v,r.default.createSVGElement("stop",{attributes:{offset:"0%","stop-color":"#FFFFFF"}})),r.default.appendElement(v,r.default.createSVGElement("stop",{attributes:{offset:"100%","stop-color":"#fafdfc"}})),r.default.appendElement(defs,v);var y=r.default.createSVGElement("g",{attributes:{class:"contents",transform:"translate("+t.MARGIN+", "+t.MARGIN+")"}});r.default.appendElement(svg,y);var E=void 0;if(h[f])E=r.default.clone(h[f]);else{E=r.default.createSVGElement("g",{attributes:{class:"lines"}});for(var S=0;S<e.boardSize-1;S++)for(var _=0;_<e.boardSize-1;_++){var w=r.default.createSVGElement("rect",{attributes:{y:S*(t.INTERSECTION_GAP_SIZE+1)-.5,x:_*(t.INTERSECTION_GAP_SIZE+1)-.5,width:t.INTERSECTION_GAP_SIZE+1,height:t.INTERSECTION_GAP_SIZE+1,class:"line-box"}});r.default.appendElement(E,w)}h[f]=E}r.default.appendElement(y,E);var A=r.default.createSVGElement("g",{attributes:{class:"hoshi"}});r.default.appendElement(y,A),o.default.hoshiPositionsFor(e.boardSize).forEach((function(e){var n=r.default.createSVGElement("circle",{attributes:{class:"hoshi",cy:e.top*(t.INTERSECTION_GAP_SIZE+1)-.5,cx:e.left*(t.INTERSECTION_GAP_SIZE+1)-.5,r:2}});r.default.appendElement(A,n)})),l&&function(){for(var n=r.default.createSVGElement("g",{attributes:{class:"coordinates",transform:"translate("+t.MARGIN+", "+t.MARGIN+")"}}),o=function(o){[-21,33+(e.boardSize-1)*(t.INTERSECTION_GAP_SIZE+1)].forEach((function(l){r.default.appendElement(n,r.default.createSVGElement("text",{text:e.xCoordinateFor(o),attributes:{"text-anchor":"middle",y:l-.5,x:o*(t.INTERSECTION_GAP_SIZE+1)-.5}}))})),[-28,28+(e.boardSize-1)*(t.INTERSECTION_GAP_SIZE+1)].forEach((function(l){r.default.appendElement(n,r.default.createSVGElement("text",{text:e.yCoordinateFor(o),attributes:{"text-anchor":"middle",y:o*(t.INTERSECTION_GAP_SIZE+1)-.5+4,x:l-.5}}))})),r.default.appendElement(svg,n)},l=0;l<e.boardSize;l++)o(l)}();for(var P=r.default.createSVGElement("g",{attributes:{class:"intersections"}}),I=0;I<e.boardSize;I++)for(var C=0;C<e.boardSize;C++){var x=r.default.createSVGElement("g",{attributes:{class:"intersection"}});x.setAttribute("data-intersection-y",I),x.setAttribute("data-intersection-x",C),r.default.appendElement(P,x);var T=r.default.createSVGElement("g",{attributes:{class:"intersection-inner-container"}});r.default.appendElement(x,T);var k=r.default.createSVGElement("rect",{attributes:{y:I*(t.INTERSECTION_GAP_SIZE+1)-t.INTERSECTION_GAP_SIZE/2-.5,x:C*(t.INTERSECTION_GAP_SIZE+1)-t.INTERSECTION_GAP_SIZE/2-.5,width:t.INTERSECTION_GAP_SIZE,height:t.INTERSECTION_GAP_SIZE}});r.default.appendElement(T,k);var O=t.INTERSECTION_GAP_SIZE/2;c&&(O-=1);var N={class:"stone",cy:I*(t.INTERSECTION_GAP_SIZE+1)-.5,cx:C*(t.INTERSECTION_GAP_SIZE+1)-.5,r:O};d||r.default.appendElement(T,r.default.createSVGElement("circle",{attributes:{class:"stone-shadow",cy:N.cy+2,cx:N.cx,r:O}}));var R=r.default.createSVGElement("circle",{attributes:N});r.default.appendElement(T,R),r.default.appendElement(T,r.default.createSVGElement("circle",{attributes:{class:"marker",cy:I*(t.INTERSECTION_GAP_SIZE+1)-.5,cx:C*(t.INTERSECTION_GAP_SIZE+1)-.5,r:4.5}})),r.default.appendElement(T,r.default.createSVGElement("rect",{attributes:{class:"ko-marker",y:I*(t.INTERSECTION_GAP_SIZE+1)-6-.5,x:C*(t.INTERSECTION_GAP_SIZE+1)-6-.5,width:12,height:12}})),r.default.appendElement(T,r.default.createSVGElement("rect",{attributes:{class:"territory-marker",y:I*(t.INTERSECTION_GAP_SIZE+1)-6,x:C*(t.INTERSECTION_GAP_SIZE+1)-6,width:11,height:11}})),r.default.appendElement(T,r.default.createSVGElement("circle",{attributes:{class:"circle-label",cy:I*(t.INTERSECTION_GAP_SIZE+1)-.5,cx:C*(t.INTERSECTION_GAP_SIZE+1)-.5,r:8}})),r.default.appendElement(T,r.default.createSVGElement("rect",{attributes:{class:"square-label",y:I*(t.INTERSECTION_GAP_SIZE+1)-6,x:C*(t.INTERSECTION_GAP_SIZE+1)-6,width:11,height:11}}));var z={x:I*t.INTERSECTION_GAP_SIZE+I-.5,y:C*t.INTERSECTION_GAP_SIZE+C-2,w:t.INTERSECTION_GAP_SIZE/4,h:t.INTERSECTION_GAP_SIZE/4};r.default.appendElement(T,r.default.createSVGElement("polygon",{attributes:{class:"triangle-label",points:String(z.x+","+(z.y-z.h)+" "+(z.x-z.w)+","+(z.y+z.h)+" "+(z.x+z.w)+","+(z.y+z.h))}}));for(var G=["a","b","c"],i=0;i<G.length;++i)r.default.appendElement(T,r.default.createSVGElement("text",{attributes:{class:G[i]+"-label",y:I*t.INTERSECTION_GAP_SIZE+I,x:C*t.INTERSECTION_GAP_SIZE+C,"text-anchor":"middle","dominant-baseline":"middle"},text:G[i].toUpperCase()}));t.grid[I]=t.grid[I]||[],t.grid[I][C]=x,t.addIntersectionEventListeners(x,I,C)}return r.default.appendElement(y,P),svg}(this,t,{hasCoordinates:n,smallerStones:l,flatStones:c});return this.svgElement=svg,this.svgElement.setAttribute("height",this.BOARD_LENGTH),this.svgElement.setAttribute("width",this.BOARD_LENGTH),svg},c.prototype.computeSizing=function(){var t=this;o.default.prototype.computeSizing.call(this),this.svgElement.style.transform="none",window.requestAnimationFrame((function(){t.svgElement.style.transform=""}))},c.prototype.setIntersectionClasses=function(t,e,n){if(t.getAttribute("class")!==n.join(" ")&&t.setAttribute("class",n.join(" ")),!this.flatStones)if(e.isEmpty())t.querySelector(".stone").setAttribute("style","");else{var base=window.location.href.split("#")[0];t.querySelector(".stone").setAttribute("style","fill: url("+base+"#"+this[e.value+"GradientID"]+")")}},e.default=c},173:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.setup=function(){},this.render=function(){},this.renderTerritory=function(){}}},174:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var e=[],n=!0,r=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(n=(l=c.next()).done)&&(e.push(l.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}return e}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=h(n(155)),l=h(n(167)),c=h(n(175));function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){var e=t.moveNumber,n=t.playedPoint,r=t.color,o=t.pass,l=t.blackPassStones,h=t.whitePassStones,d=t.intersections,f=t.blackStonesCaptured,m=t.whiteStonesCaptured,v=t.capturedPositions,y=t.koPoint,E=t.boardSize,S=t.labelPoint,_=t.labelType,w=t.hidePlayedPoint;this.moveNumber=e,this.playedPoint=n,this.color=r,this.pass=o,this.blackPassStones=l,this.whitePassStones=h,this.intersections=d,this.blackStonesCaptured=f,this.whiteStonesCaptured=m,this.capturedPositions=v,this.koPoint=y,this.boardSize=E,this.labelPoint=S,this.labelType=_,this.hidePlayedPoint=w,this._positionHash=c.default.hash(E,d),Object.freeze(this)};d.prototype={copyWithAttributes:function(t){var e=function(t){return{moveNumber:t.moveNumber,playedPoint:t.playedPoint,color:t.color,pass:t.pass,blackPassStones:t.blackPassStones,whitePassStones:t.whitePassStones,intersections:t.intersections,blackStonesCaptured:t.blackStonesCaptured,whiteStonesCaptured:t.whiteStonesCaptured,capturedPositions:t.capturedPositions,koPoint:t.koPoint,boardSize:t.boardSize,labelPoint:t.labelPoint,labelType:t.labelType,hidePlayedPoint:t.hidePlayedPoint}},n=e(this),r=e(Object.assign(n,t));return new d(r)},_capturesFrom:function(t,e,n){var r=this,l=this.neighborsFor(t,e).filter((function(t){return!t.isEmpty()&&t.value!==n&&1===r.libertiesAt(t.y,t.x)})),c=o.default.flatMap(l,(function(t){return r.groupAt(t.y,t.x)}));return o.default.unique(c)},_updateIntersection:function(t,e,n,label){return e.map((function(i){return i.y===t.y&&i.x===t.x?new l.default(i.y,i.x,n,label):i}))},_removeIntersection:function(t,e){return this._updateIntersection(t,e,"empty")},_withoutIntersectionsMatching:function(t){var e=this.intersections.map((function(i){return t(i)?new l.default(i.y,i.x,"empty"):i}));return this._withNewPoints(e)},_withNewPoints:function(t){return this.copyWithAttributes({intersections:t})},nextColor:function(){return"black"===this.color?"white":"black"},setColor:function(t){return this.copyWithAttributes({color:"blackwhite".replace(t,"")})},yCoordinateFor:function(t){return this.boardSize-t},xCoordinateFor:function(t){return["A","B","C","D","E","F","G","H","J","K","L","M","N","O","P","Q","R","S","T"][t]},playPass:function(t){var e={moveNumber:this.moveNumber+1,playedPoint:null,color:t,pass:!0,blackPassStones:this.blackPassStones,whitePassStones:this.whitePassStones,intersections:this.intersections,blackStonesCaptured:this.blackStonesCaptured,whiteStonesCaptured:this.whiteStonesCaptured,capturedPositions:[],koPoint:null,boardSize:this.boardSize,labelPoint:null,labelType:null};return e[t+"PassStones"]+=1,new d(e)},_simpleKoPoint:function(){var t=null;if(this.playedPoint){var e=this.playedPoint,n=e.y,r=e.x;1===this.capturedPositions.length&&1===this.groupAt(n,r).length&&this.inAtari(n,r)&&(t=this.capturedPositions[0])}return t},labelAt:function(t,e,label){var n=this.intersectionAt(t,e),r=this.intersections;return r=this._updateIntersection(n,r,n.value,label),this.copyWithAttributes({intersections:r,labelPoint:{y:t,x:e},labelType:label})},playAt:function(t,e,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=this._capturesFrom(t,e,n),c=this.intersectionAt(t,e),h=this.intersections;l.forEach((function(i){h=r._removeIntersection(i,h)})),h=this._updateIntersection(c,h,n);var f=this.blackStonesCaptured+("black"===n?0:l.length),m=this.whiteStonesCaptured+("white"===n?0:l.length),v=this.boardSize,y={moveNumber:this.moveNumber+1,playedPoint:Object.freeze({y:t,x:e}),color:n,pass:!1,blackPassStones:this.blackPassStones,whitePassStones:this.whitePassStones,intersections:h,blackStonesCaptured:f,whiteStonesCaptured:m,capturedPositions:l,boardSize:v,labelPoint:null,hidePlayedPoint:o},E=new d(y),S=E._simpleKoPoint();return y.koPoint=S?{y:S.y,x:S.x}:null,new d(y)},intersectionAt:function(t,e){if(t>=this.boardSize||e>=this.boardSize)throw new Error("Intersection at ("+t+", "+e+") would be outside the board");if(t<0||e<0)throw new Error("Intersection position cannot be negative, but was given ("+t+", "+e+")");return this.intersections[t*this.boardSize+e]},groupAt:function(t,e){var n=this.intersectionAt(t,e),o=this.partitionTraverse(n,(function(t){return t.sameColorAs(n)})),l=r(o,2),c=l[0];l[1];return c},libertiesAt:function(t,e){var n=this,r=this.intersectionAt(t,e),l=o.default.flatMap(this.groupAt(r.y,r.x),(function(t){return n.neighborsFor(t.y,t.x).filter((function(t){return t.isEmpty()}))}));return o.default.unique(l).length},inAtari:function(t,e){return 1===this.libertiesAt(t,e)},neighborsFor:function(t,e){var n=[];return e>0&&n.push(this.intersectionAt(t,e-1)),e<this.boardSize-1&&n.push(this.intersectionAt(t,e+1)),t>0&&n.push(this.intersectionAt(t-1,e)),t<this.boardSize-1&&n.push(this.intersectionAt(t+1,e)),n},positionSameAs:function(t){return this._positionHash===t._positionHash&&this.intersections.every((function(e){return e.sameColorAs(t.intersectionAt(e.y,e.x))}))},partitionTraverse:function(t,e){var n=[],r=[],l=[];for(l.push(t);l.length>0;){var c=l.pop();n.indexOf(c)>-1||(n.push(c),this.neighborsFor(c.y,c.x).forEach((function(t){n.indexOf(t)>-1||(e(t)?l.push(t):r.push(t))})))}return[n,o.default.unique(r)]}},d._initialFor=function(t,e){if(this._cache=this._cache||{},this._cache[t]=this._cache[t]||{},this._cache[t][e])return this._cache[t][e];var n=Array.apply(null,Array(t*t));n=n.map((function(e,i){return new l.default(Math.floor(i/t),i%t)}));var r=t>11?3:2,o={topRight:{y:r,x:t-r-1},bottomLeft:{y:t-r-1,x:r},bottomRight:{y:t-r-1,x:t-r-1},topLeft:{y:r,x:r},middle:{y:(t+1)/2-1,x:(t+1)/2-1},middleLeft:{y:(t+1)/2-1,x:r},middleRight:{y:(t+1)/2-1,x:t-r-1},middleTop:{y:r,x:(t+1)/2-1},middleBottom:{y:t-r-1,x:(t+1)/2-1}};({0:[],1:[],2:[o.topRight,o.bottomLeft],3:[o.topRight,o.bottomLeft,o.bottomRight],4:[o.topRight,o.bottomLeft,o.bottomRight,o.topLeft],5:[o.topRight,o.bottomLeft,o.bottomRight,o.topLeft,o.middle],6:[o.topRight,o.bottomLeft,o.bottomRight,o.topLeft,o.middleLeft,o.middleRight],7:[o.topRight,o.bottomLeft,o.bottomRight,o.topLeft,o.middleLeft,o.middleRight,o.middle],8:[o.topRight,o.bottomLeft,o.bottomRight,o.topLeft,o.middleLeft,o.middleRight,o.middleTop,o.middleBottom],9:[o.topRight,o.bottomLeft,o.bottomRight,o.topLeft,o.middleLeft,o.middleRight,o.middleTop,o.middleBottom,o.middle]})[e].forEach((function(p){n[p.y*t+p.x]=new l.default(p.y,p.x,"black")}));var c=new d({color:e>1?"black":"white",moveNumber:0,intersections:Object.freeze(n),blackStonesCaptured:0,whiteStonesCaptured:0,whitePassStones:0,blackPassStones:0,boardSize:t});return this._cache[t][e]=c,c},e.default=d},175:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};e.default={hash:function(t,e){var n=0;return e.forEach((function(i){if(!i.isEmpty()){var e=function(t,e,n,o){if(r[t]=r[t]||{},r[t][e]=r[t][e]||{},r[t][e][n]=r[t][e][n]||{},r[t][e][n][o])return r[t][e][n][o];var l=Math.floor(Math.random()*(Math.pow(2,31)-1));return r[t][e][n][o]=l,l}(t,i.y,i.x,i.value);n^=e}})),n}}},176:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=["simple","positional-superko","situational-superko","natural-situational-superko"],o=function(t){var e=t.koRule;if(this.koRule=e,r.indexOf(this.koRule)<0)throw new Error("Unknown ko rule: "+e);Object.freeze(this)};o.prototype={isIllegal:function(t,e,n){var r=n.currentState();return!r.intersectionAt(t,e).isEmpty()||this._wouldBeSuicide(t,e,r)||this._isKoViolation(t,e,r,n._moves)},_isKoViolation:function(t,e,n,r){var o=!1;if("simple"===this.koRule){var l=n._simpleKoPoint();o=Boolean(l)&&t===l.y&&e===l.x}else{var c=n.playAt(t,e,n.nextColor()),h=function(t){return r.length>0&&r.some((function(e){return t(e)&&e.positionSameAs(c)}))};if("positional-superko"===this.koRule)o=h((function(){return!0}));else if("situational-superko"===this.koRule)o=h((function(t){return t.color===c.color}));else{if("natural-situational-superko"!==this.koRule)throw new Error("Unimplemented ko rule "+this.koRule);o=h((function(t){return!t.pass&&t.color===c.color}))}}return o},_wouldBeSuicide:function(t,e,n){var r=n.nextColor(),o=n.intersectionAt(t,e);return!(!o.isEmpty()||0!==n.neighborsFor(o.y,o.x).filter((function(t){return t.isEmpty()})).length)&&(!n.neighborsFor(o.y,o.x).some((function(t){var e=n.inAtari(t.y,t.x);return t.isOccupiedWith(r)&&!e}))&&!n.neighborsFor(o.y,o.x).some((function(t){var e=n.inAtari(t.y,t.x);return!t.isOccupiedWith(r)&&e})))}},e.default=o},177:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(n(155)),o=h(n(167)),l=h(n(178)),c=h(n(179));function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){return t.currentState()._withoutIntersectionsMatching((function(i){return t._isDeadAt(i.y,i.x)}))},f=function(t){var e=l.default.allFor(t),n=e.filter((function(t){return t.isNeutral()}));if(0===e.length||0===n.length)return t;var r={};n.forEach((function(t){var e=null;t.intersections.forEach((function(t){e=(e=e||t.x)||t.y;var n=["black","white"][(Math.abs(t.y-null)+Math.abs(t.x-e))%2],l=new o.default(t.y,t.x,n);r[t.y]=r[t.y]||[],r[t.y][t.x]=l}))}));var c=t.intersections.map((function(i){return r[i.y]&&r[i.y][i.x]?r[i.y][i.x]:i}));return t._withNewPoints(c)},m=Object.freeze({score:function(t){var e=t.deadStones().filter((function(e){return t.intersectionAt(e.y,e.x).isBlack()})),n=t.deadStones().filter((function(e){return t.intersectionAt(e.y,e.x).isWhite()})),r=t.territory(),o=t.currentState();return{black:r.black.length+o.whiteStonesCaptured+n.length,white:r.white.length+o.blackStonesCaptured+e.length}},territory:function(t){var e=d(t),n=function(t){for(var e=l.default.allFor(t).filter((function(t){return t.isTerritory()})),n=r.default.flatMap(e,(function(t){return t.intersections})).filter((function(i){return new c.default(t,i).isFalse()})).filter((function(i){return t.neighborsFor(i.y,i.x).some((function(e){return t.inAtari(e.y,e.x)}))})),h=t,d=function(){var t=h.intersections.map((function(i){return n.indexOf(i)>-1?new o.default(i.y,i.x,new c.default(h,i).filledColor()):i}));h=h._withNewPoints(t);var e=f(h),d=l.default.allFor(e).filter((function(t){return t.isTerritory()})),m=r.default.flatMap(d,(function(t){return t.intersections})).filter((function(i){return new c.default(e,i).isFalse()}));n=m.filter((function(i){return h.neighborsFor(i.y,i.x).some((function(t){return h.inAtari(t.y,t.x)}))}))};n.length>0;)d();return h}(f(e)),h=l.default.allFor(n).filter((function(t){return t.isTerritory()})),m=h.filter((function(t){var e=l.default.merge(h,t).map((function(t){return Math.ceil(t.numberOfEyes())}));return e.length>0&&e.reduce((function(a,b){return a+b}))>=2})),v=m.filter((function(t){return t.isBlack()})),y=m.filter((function(t){return t.isWhite()}));return{black:r.default.flatMap(v,(function(t){return t.intersections})).map((function(i){return{y:i.y,x:i.x}})),white:r.default.flatMap(y,(function(t){return t.intersections})).map((function(i){return{y:i.y,x:i.x}}))}}}),v=Object.freeze({score:function(t){var e=t.intersections().filter((function(e){return e.isBlack()&&!t._isDeadAt(e.y,e.x)})),n=t.intersections().filter((function(e){return e.isWhite()&&!t._isDeadAt(e.y,e.x)})),r=t.territory();return{black:r.black.length+e.length,white:r.white.length+n.length}},territory:function(t){var e=l.default.allFor(d(t)).filter((function(t){return t.isTerritory()})),n=e.filter((function(t){return t.isBlack()})),o=e.filter((function(t){return t.isWhite()}));return{black:r.default.flatMap(n,(function(t){return t.intersections})).map((function(i){return{y:i.y,x:i.x}})),white:r.default.flatMap(o,(function(t){return t.intersections})).map((function(i){return{y:i.y,x:i.x}}))}}}),y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scoreBy,n=t.komi;if(this._strategy={area:v,territory:m,equivalence:v}[e],this._komi=n,!this._strategy)throw new Error("Unknown scoring type: "+e);if(null===this._komi||void 0===this._komi)throw new Error("Error initializing scorer without a komi value");if("number"!=typeof this._komi)throw new Error("Komi value given is not a number: "+n);this._usePassStones="equivalence"===e,Object.freeze(this)};y.prototype={score:function(t){var e=this._strategy.score(t);if(e.white+=this._komi,this._usePassStones){var n="white"!==t.currentState().color;return{black:e.black+t.currentState().whitePassStones+(n?1:0),white:e.white+t.currentState().blackPassStones}}return e},territory:function(t){return this._strategy.territory(t)},usingPassStones:function(){return this._usePassStones}},e.default=y},178:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var e=[],n=!0,r=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(n=(l=c.next()).done)&&(e.push(l.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}return e}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=n(155),c=(r=l)&&r.__esModule?r:{default:r};var h=function(t,e){this.boardState=t,this.intersections=e,this._computed={},Object.freeze(this)};h._startingAt=function(t,e,n){var r=t.intersectionAt(e,n),l=t.partitionTraverse(r,(function(t){return t.sameColorAs(r)})),c=o(l,2);return[c[0],c[1]]},h.allFor=function(t){var e=[],n=[];return t.intersections.forEach((function(r){if(e.indexOf(r)>-1);else{var l=t.partitionTraverse(r,(function(t){return t.sameColorAs(r)})),c=o(l,2),d=c[0];c[1];n.push(new h(t,d)),e=e.concat(d)}})),n},h.merge=function(t,e){for(var n=[e],r=-1;n.length!==r;)r=n.length,n=t.filter((function(t){return t.isEmpty()&&t.isTerritory()&&t.territoryColor()===e.territoryColor()&&t.expandedBoundaryStones().some((function(t){return n.some((function(e){return e.expandedBoundaryStones().indexOf(t)>-1}))}))}));return n},h.prototype={isEmpty:function(){return this.intersections[0].isEmpty()},isTerritory:function(){var t=this.intersections[0];if(!t.isEmpty())return!1;var e=h._startingAt(this.boardState,t.y,t.x),n=o(e,2),r=(n[0],n[1]),l=c.default.unique(r.map((function(i){return i.value}))),d=1===l.length&&"empty"!==l[0];return d},territoryColor:function(){var t=this.intersections[0],e=h._startingAt(this.boardState,t.y,t.x),n=o(e,2),r=(n[0],n[1]),l=c.default.unique(r.map((function(i){return i.value}))),d=1===l.length&&"empty"!==l[0];if(t.isEmpty()&&d)return l[0];throw new Error("Attempted to obtain territory color for something that isn't territory, region containing "+t.y+","+t.x)},isBlack:function(){return"black"===this.territoryColor()},isWhite:function(){return"white"===this.territoryColor()},isNeutral:function(){return!this.intersections[0].isBlack()&&!this.intersections[0].isWhite()&&!this.isTerritory()},exterior:function(){var t=this;return this.boardState.intersections.filter((function(i){return t.intersections.indexOf(i)<0&&t.boardState.neighborsFor(i.y,i.x).some((function(e){return t.intersections.indexOf(e)>-1}))}))},boundaryStones:function(){var t=this;if(this._computed.boundaryStones)return this._computed.boundaryStones;if(!this.isEmpty())throw new Error("Attempted to obtain boundary stones for non-empty region");return this._computed.boundaryStones=this.exterior().filter((function(i){return!i.sameColorAs(t.intersections[0])})),this._computed.boundaryStones},expandedBoundaryStones:function(){if(this._computed.expandedBoundaryStones)return this._computed.expandedBoundaryStones;var t=this.boundaryStones(),e=h.allFor(this.boardState).filter((function(e){return e.intersections.some((function(i){return t.indexOf(i)>-1}))}));return this._computed.expandedBoundaryStones=c.default.flatMap(e,(function(t){return t.intersections})),this._computed.expandedBoundaryStones},lengthOfTerritoryBoundary:function(){var t=this,e=this.intersections.filter((function(i){return 0===i.y||i.y===t.boardState.boardSize-1||0===i.x||i.x===t.boardState.boardSize-1})),n=this.intersections.filter((function(i){return i.y%t.boardState.boardSize-1==0&&i.x%t.boardState.boardSize-1==0}));return this.boundaryStones().length+e.length+n.length},containsSquareFour:function(){var t=this;return this.intersections.some((function(i){return[[0,0],[0,1],[1,0],[1,1]].every((function(e){var n=o(e,2),r=n[0],l=n[1],c=i.y+r,h=i.x+l;return c>=0&&c<t.boardState.boardSize&&h>=0&&h<t.boardState.boardSize&&t.boardState.intersectionAt(c,h).sameColorAs(i)}))}))},containsCurvedFour:function(){var t=this;return this.intersections.some((function(i){return[[[0,0],[1,0],[2,0],[2,1]],[[-1,2],[0,0],[0,1],[0,2]],[[0,0],[0,1],[1,1],[2,1]],[[-1,0],[-1,1],[-1,2],[0,0]],[[-2,1],[-1,1],[0,0],[0,1]],[[0,0],[1,0],[1,1],[1,2]],[[0,-1],[0,0],[1,-1],[2,-1]],[[-1,-2],[-1,-1],[-1,0],[0,0]]].some((function(e){return e.every((function(e){var n=o(e,2),r=n[0],l=n[1],c=i.y+r,h=i.x+l;return c>=0&&c<t.boardState.boardSize&&h>=0&&h<t.boardState.boardSize&&t.boardState.intersectionAt(c,h).sameColorAs(i)}))}))}))},numberOfEyes:function(){if(!this.intersections[0].isEmpty())throw new Error("Unexpected calculation of number of eyes for a non-empty region containing "+this.intersections[0].y+","+this.intersections[0].x);var t=this.lengthOfTerritoryBoundary();if(t<2)throw new Error("Unexpected boundary length of "+t+" for region including "+this.intersections[0].y+","+this.intersections[0].x);if(t>=10)return 2;var e=void 0;switch(t){case 2:case 3:case 4:case 5:case 6:e=1;break;case 7:e=1.5;break;case 8:e=this.containsSquareFour()?1:this.containsCurvedFour()?2:1.5;break;case 9:e=this.containsSquareFour()?1.5:2;break;default:throw new Error("unhandled boundary length "+t)}return e}},e.default=h},179:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){this.boardState=t,this.intersection=e,Object.freeze(this)};r.prototype={diagonals:function(){var t=this,e=[],n=[],r=[];return this.intersection.x>0&&n.push(this.intersection.x-1),this.intersection.x<this.boardState.boardSize-1&&n.push(this.intersection.x+1),this.intersection.y>0&&r.push(this.intersection.y-1),this.intersection.y<this.boardState.boardSize-1&&r.push(this.intersection.y+1),n.forEach((function(n){r.forEach((function(r){e.push(t.boardState.intersectionAt(r,n))}))})),e},isFalse:function(){if(!this.intersection.isEmpty())return!1;var t=this.diagonals(),e=t.length<=2,n=this.neighbors().filter((function(i){return!i.isEmpty()}));if(e&&n.length<1)return!1;if(!e&&n.length<2)return!1;var r=t.filter((function(t){return!t.isEmpty()&&!t.sameColorAs(n[0])}));return e?r.length>=1:r.length>=2},neighbors:function(){return this.boardState.neighborsFor(this.intersection.y,this.intersection.x)},filledColor:function(){if(!this.isFalse())throw new Error("Attempting to find filled color for a non-false eye");return this.neighbors()[0].value}},e.default=r},180:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(165),l=(r=o)&&r.__esModule?r:{default:r};var c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._boardElement=t.element,this._setup(t)};c.prototype={_setup:function(t){var e=this,n=t.player,r=t.gameOptions,o=t.hooks;if(this._player=n,this._hooks=o,"black"!==this._player&&"white"!==this._player)throw new Error("Player must be either black or white, but was given: "+this._player);r._hooks={handleClick:function(t,n){if(!e._busy)if(e._busy=!0,e.isOver()){var r=e._game.currentState().groupAt(t,n).map((function(i){return{y:i.y,x:i.x,color:i.color}}));e._hooks.submitMarkDeadAt(t,n,r,(function(r){r&&e._game.toggleDeadAt(t,n),e._busy=!1}))}else{if(e._player!==e.currentPlayer()||e._game.isIllegalAt(t,n))return void(e._busy=!1);e._hooks.submitPlay(t,n,(function(r){r&&e._game.playAt(t,n),e._busy=!1}))}},hoverValue:function(t,n){if(!e._busy&&e._player===e.currentPlayer()&&!e.isOver()&&!e._game.isIllegalAt(t,n))return e._player},gameIsOver:function(){return e.isOver()}},this._boardElement?this._game=new l.default(Object.assign({element:this._boardElement},r)):this._game=new(Function.prototype.bind.apply(l.default,[null].concat(function(t){if(Array.isArray(t)){for(var i=0,e=Array(t.length);i<t.length;i++)e[i]=t[i];return e}return Array.from(t)}(r))))},isOver:function(){return this._game.isOver()},currentPlayer:function(){return this._game.currentPlayer()},labelAt:function(t,e,label){this._game.labelAt(t,e,label)},receivePlay:function(t,e){this._player!==this.currentPlayer()&&this._game.playAt(t,e)},moveNumber:function(){return this._game.moveNumber()},receivePass:function(){this._player!==this.currentPlayer()&&this._game.pass()},receiveMarkDeadAt:function(t,e){this._game.toggleDeadAt(t,e)},deadStones:function(){return this._game.deadStones()},setDeadStones:function(t){this._game._deadPoints=t.map((function(i){return{y:i.y,x:i.x}})),this._game.render()},pass:function(){var t=this;this._busy||this._player!==this.currentPlayer()||this.isOver()||(this._busy=!0,this._hooks.submitPass((function(e){e&&t._game.pass(),t._busy=!1})))}},e.default=c},183:function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return r}))},184:function(t,e,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,l=o&&"function"==typeof o.apply?o.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var c=Number.isNaN||function(t){return t!=t};function h(){h.init.call(this)}t.exports=h,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var d=10;function f(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function m(t){return void 0===t._maxListeners?h.defaultMaxListeners:t._maxListeners}function v(t,e,n,r){var o,l,c,h;if(f(n),void 0===(l=t._events)?(l=t._events=Object.create(null),t._eventsCount=0):(void 0!==l.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),l=t._events),c=l[e]),void 0===c)c=l[e]=n,++t._eventsCount;else if("function"==typeof c?c=l[e]=r?[n,c]:[c,n]:r?c.unshift(n):c.push(n),(o=m(t))>0&&c.length>o&&!c.warned){c.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=t,d.type=e,d.count=c.length,h=d,console&&console.warn&&console.warn(h)}return t}function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=y.bind(r);return o.listener=n,r.wrapFn=o,o}function S(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(o):w(o,o.length)}function _(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function w(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(t){if("number"!=typeof t||t<0||c(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");d=t}}),h.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||c(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},h.prototype.getMaxListeners=function(){return m(this)},h.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var c=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw c.context=o,c}var h=r[t];if(void 0===h)return!1;if("function"==typeof h)l(h,this,e);else{var d=h.length,f=w(h,d);for(i=0;i<d;++i)l(f[i],this,e)}return!0},h.prototype.addListener=function(t,e){return v(this,t,e,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(t,e){return v(this,t,e,!0)},h.prototype.once=function(t,e){return f(e),this.on(t,E(this,t,e)),this},h.prototype.prependOnceListener=function(t,e){return f(e),this.prependListener(t,E(this,t,e)),this},h.prototype.removeListener=function(t,e){var n,r,o,i,l;if(f(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){l=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,l||e)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},h.prototype.listeners=function(t){return S(this,t,!0)},h.prototype.rawListeners=function(t){return S(this,t,!1)},h.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):_.call(t,e)},h.prototype.listenerCount=_,h.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},191:function(t,e,n){"use strict";var r=n(23);function o(t,e){return!e||"object"!==Object(r.a)(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}n.d(e,"a",(function(){return o}))},192:function(t,e,n){"use strict";function r(t,p){return(r=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t})(t,p)}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return o}))}}]);